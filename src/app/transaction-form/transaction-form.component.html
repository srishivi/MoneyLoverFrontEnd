<div class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50">
  <div class="bg-white rounded-lg shadow-lg p-4 sm:p-8 w-full max-w-md sm:max-w-lg relative mx-2 sm:mx-0">
    <button class="absolute top-2 right-2 text-gray-400 hover:text-gray-700 text-2xl" (click)="close.emit()">&times;</button>
    <h2 class="text-xl font-bold mb-4">Add Transaction</h2>
    <form (ngSubmit)="onSubmit()" #f="ngForm">
      <div class="mb-4">
        <label class="block mb-1 font-medium">Amount</label>
        <input type="text" class="border rounded px-3 py-2 w-full" required [(ngModel)]="form.amount" name="amount">
        <div *ngIf="errors['amount']" class="text-red-600 text-sm mt-1">{{ errors['amount'] }}</div>
      </div>
      <div class="mb-4">
        <label class="block mb-1 font-medium">Type</label>
        <select class="border rounded px-3 py-2 w-full" required [(ngModel)]="form.type" name="type">
          <option value="expense">Expense</option>
          <option value="income">Income</option>
        </select>
        <div *ngIf="errors['type']" class="text-red-600 text-sm mt-1">{{ errors['type'] }}</div>
      </div>
      <div class="mb-4">
        <label class="block mb-1 font-medium">Category</label>
        <select class="border rounded px-3 py-2 w-full" required [(ngModel)]="form.category_id" name="category_id">
          <option value="" disabled>Select category</option>
          <option *ngFor="let cat of categories" [value]="cat.id">{{ cat.name }}</option>
        </select>
        <div *ngIf="errors['category_id']" class="text-red-600 text-sm mt-1">{{ errors['category_id'] }}</div>
      </div>
      <div class="mb-4">
        <label class="block mb-1 font-medium">Tags</label>
        <select class="border rounded px-3 py-2 w-full" multiple [(ngModel)]="form.tag_ids" name="tag_ids">
          <option *ngFor="let tag of tags" [value]="tag.id">{{ tag.name }}</option>
        </select>
      </div>
      <div class="mb-4">
        <label class="block mb-1 font-medium">Description</label>
        <input type="text" class="border rounded px-3 py-2 w-full" [(ngModel)]="form.description" name="description">
      </div>
      <div class="mb-4">
        <label class="block mb-1 font-medium">Date & Time</label>
        <input type="datetime-local" class="border rounded px-3 py-2 w-full" required [(ngModel)]="form.timestamp" name="timestamp">
        <div *ngIf="errors['timestamp']" class="text-red-600 text-sm mt-1">{{ errors['timestamp'] }}</div>
      </div>
      <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full">Save</button>
    </form>
  </div>
</div>
